<Window x:Class="GestorTareasWPF.FrmInformeKanban"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
        mc:Ignorable="d"
        Title="Informe de Estado Kanban" Height="700" Width="1100"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource BackgroundBrush}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="0,0,0,25">
            <StackPanel>
                <TextBlock Text="Dashboard de Proyecto" FontSize="28" FontWeight="Bold" Foreground="{StaticResource PrimaryBrush}"/>
                <TextBlock Text="Resumen de rendimiento y estado de tareas" FontSize="14" Foreground="#777"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                <TextBlock Text="Filtrar vista:" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="#666" FontWeight="SemiBold"/>

                <ComboBox x:Name="cmbFiltro" 
                          SelectionChanged="CmbFiltro_SelectionChanged"
                          Width="160" Height="35"
                          Padding="10,5"
                          Background="White"
                          BorderBrush="{StaticResource AccentBrush}"
                          BorderThickness="1"
                          VerticalContentAlignment="Center">
                    <ComboBox.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="8"/>
                        </Style>
                    </ComboBox.Resources>

                    <ComboBoxItem Content="Todas" IsSelected="True" FontWeight="Bold"/>
                    <ComboBoxItem Content="Pendiente"/>
                    <ComboBoxItem Content="En Proceso"/>
                    <ComboBoxItem Content="Completado"/>
                </ComboBox>
            </StackPanel>
        </Grid>

        <Grid Grid.Row="1" Margin="0,0,0,25">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Background="White" CornerRadius="15" Margin="0,0,15,0" Padding="20">
                <Border.Effect>
                    <DropShadowEffect Color="#CCCCCC" BlurRadius="10" Opacity="0.4" ShadowDepth="3"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="TAREAS VISIBLES" FontSize="12" FontWeight="Bold" Foreground="#999"/>
                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                        <TextBlock Text="📋" FontSize="24" Margin="0,0,10,0" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtTotal" Text="0" FontSize="36" FontWeight="Bold" Foreground="{StaticResource PrimaryBrush}"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <Border Grid.Column="1" Background="{StaticResource SecondaryBrush}" CornerRadius="15" Margin="0,0,15,0" Padding="20">
                <Border.Effect>
                    <DropShadowEffect Color="#EE6C4D" BlurRadius="15" Opacity="0.4" ShadowDepth="3"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="% COMPLETADO" FontSize="12" FontWeight="Bold" Foreground="White" Opacity="0.8"/>
                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                        <TextBlock Text="🚀" FontSize="24" Margin="0,0,10,0" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtPorcentaje" Text="0%" FontSize="36" FontWeight="Bold" Foreground="White"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>

        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="4.5*"/>
                <ColumnDefinition Width="5.5*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Background="White" CornerRadius="15" Margin="0,0,15,0" Padding="20">
                <Border.Effect>
                    <DropShadowEffect Color="#CCCCCC" BlurRadius="10" Opacity="0.3"/>
                </Border.Effect>
                <Grid>
                    <TextBlock Text="Distribución Visual" FontWeight="Bold" Foreground="{StaticResource PrimaryBrush}" VerticalAlignment="Top"/>

                    <Grid Margin="0,30,0,0">
                        <lvc:PieChart x:Name="graficoCircular" LegendLocation="Bottom" Hoverable="True" DataTooltip="{x:Null}">
                            <lvc:PieChart.ChartLegend>
                                <lvc:DefaultLegend BulletSize="10"/>
                            </lvc:PieChart.ChartLegend>
                        </lvc:PieChart>

                        <lvc:CartesianChart x:Name="graficoCartesiano" Visibility="Hidden" LegendLocation="Bottom">
                            <lvc:CartesianChart.AxisX>
                                <lvc:Axis x:Name="ejeX" LabelsRotation="15"></lvc:Axis>
                            </lvc:CartesianChart.AxisX>
                            <lvc:CartesianChart.AxisY>
                                <lvc:Axis x:Name="ejeY" MinValue="0"></lvc:Axis>
                            </lvc:CartesianChart.AxisY>
                        </lvc:CartesianChart>
                    </Grid>
                </Grid>
            </Border>

            <Border Grid.Column="1" Background="White" CornerRadius="15" Margin="0,0,0,0" Padding="0" ClipToBounds="True">
                <Border.Effect>
                    <DropShadowEffect Color="#CCCCCC" BlurRadius="10" Opacity="0.3"/>
                </Border.Effect>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Text="Detalle de Tareas" Margin="20" FontWeight="Bold" Foreground="{StaticResource PrimaryBrush}"/>

                    <DataGrid Grid.Row="1" x:Name="gridDetalle" 
                              AutoGenerateColumns="False" 
                              IsReadOnly="True" 
                              BorderThickness="0"
                              HeadersVisibility="Column">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Tarea" Binding="{Binding Titulo}" Width="2*"/>

                            <DataGridTextColumn Header="Estado" Binding="{Binding Estado}" Width="*">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Foreground" Value="{StaticResource SecondaryBrush}"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Margin" Value="5,0"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>

                            <DataGridTextColumn Header="Prioridad" Binding="{Binding Prioridad}" Width="*"/>
                            <DataGridTextColumn Header="Responsable" Binding="{Binding Responsable}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </Border>
        </Grid>

        <StackPanel x:Name="PanelBotones" Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">

            <Button Click="BtnCambiarGrafico_Click" Margin="10,0" Padding="15,8" Background="#FFF3E0" BorderBrush="#FFCC80">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="🔄 Cambiar Gráfico" FontWeight="SemiBold" Foreground="#EF6C00"/>
                </StackPanel>
            </Button>

            <Button Click="BtnExportar_Click" Margin="10,0" Padding="15,8" Background="#E0F7FA" BorderBrush="#80DEEA">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="💾 Guardar PDF" FontWeight="SemiBold" Foreground="#0097A7"/>
                </StackPanel>
            </Button>

        </StackPanel>
    </Grid>
</Window>